"use strict";(self.webpackChunk_freshgum_typedi_docs=self.webpackChunk_freshgum_typedi_docs||[]).push([[201],{5941:(e,t,i)=>{i.d(t,{z:()=>r});const r=[String,Object,Boolean,Symbol,Array,Number]},8727:(e,t,i)=>{i.d(t,{I:()=>r});const r=Symbol("EMPTY_VALUE")},4516:(e,t,i)=>{i.d(t,{G:()=>r});const r={multiple:!1,eager:!1,scope:"container",value:i(8727).I,factory:void 0}},9306:(e,t,i)=>{i.d(t,{L:()=>g,J:()=>w});const r="A container with the specified name",s="No container is registered with the given ID.";class n extends Error{constructor(){super(...arguments),this.name="ContainerRegistryError"}}class o{static registerContainer(e){if(e instanceof g==!1)throw new n("Only ContainerInstance instances can be registered.");if(o.containerMap.has(e.id))throw new n("Cannot register container with same ID.");o.containerMap.set(e.id,e)}static hasContainer(e){return o.containerMap.has(e)}static getContainer(e){const t=this.containerMap.get(e);if(void 0===t)throw new n(s);return t}static async removeContainer(e){const t=o.containerMap.get(e.id);if(void 0===t)throw new n(s);o.containerMap.delete(e.id),await t.dispose()}}o.containerMap=new Map;var a=i(2174);class l extends Error{get message(){return`Service with "${this.normalizedIdentifier}" identifier was not found in the container. Register it before usage via explicitly calling the "Container.set" function or using the "@Service()" decorator.`}constructor(e){super(),this.name="ServiceNotFoundError",this.normalizedIdentifier="<UNKNOWN_IDENTIFIER>","string"==typeof e?this.normalizedIdentifier=e:e instanceof a.W?this.normalizedIdentifier=`Token<${e.name||"UNSET_NAME"}>`:e&&(e.name||e.prototype?.name)&&(this.normalizedIdentifier=`MaybeConstructable<${e.name??e.prototype?.name}>`)}}var c=i(2440),d=i(8727),h=i(5941),u=i(5275),p=i(4516),f=i(4649);const v=new a.W("Host Container");class y{constructor(){this.disposed=!1,this.visitors=[],this.anyVisitorsPresent=!1}get notifyVisitors(){return!this.disposed&&this.anyVisitorsPresent}forEachVisitor(e){this.notifyVisitors&&this.visitors.forEach((t=>{t.disposed?this.removeVisitorFromCollection(t):e(t)}))}notifyChildContainerVisited(e){this.forEachVisitor((t=>t.visitChildContainer?.(e)))}notifyOrphanedContainerVisited(e){this.forEachVisitor((t=>t.visitOrphanedContainer?.(e)))}notifyNewServiceVisited(e){this.forEachVisitor((t=>t.visitNewService?.(e)))}notifyRetrievalVisited(e,t){this.forEachVisitor((i=>i.visitRetrieval?.(e,t)))}addVisitorToCollection(e,t){if(this.visitors.includes(e))return!1;"visitOrphanedContainer"in e&&t!==w&&y.forwardOrphanedContainerEvents(e),this.visitors.push(e),this.anyVisitorsPresent||(this.anyVisitorsPresent=!0);const i=e.visitContainer?.(t);return!!i||(this.removeVisitorFromCollection(e),!1)}removeVisitorFromCollection(e){const t=this.visitors.indexOf(e);return-1!==t&&(this.visitors.splice(t,1),0===this.visitors.length&&(this.anyVisitorsPresent=!1),!0)}static forwardOrphanedContainerEvents(e){const t={get disposed(){return e.disposed},dispose(){this.disposed=!0},visitOrphanedContainer(t){this.disposed||e.visitOrphanedContainer?.(t)},visitContainer:e=>e===w};return w.acceptTreeVisitor(t)}dispose(){this.disposed||(this.disposed=!0,this.forEachVisitor((e=>e.dispose())))}}const m=[v];class g{constructor(e,t){this.parent=t,this.metadataMap=new Map,this.multiServiceIds=new Map,this.disposed=!1,this.visitor=new y,this.isRetrievingPrivateToken=!1,this.id=e}has(e,t=!0){if(this.throwIfDisposed(),m.includes(e))return!0;const i=this.getIdentifierLocation(e);return!(!t||1!==i)||0===i}getIdentifierLocation(e){return this.throwIfDisposed(),this.metadataMap.has(e)||this.multiServiceIds.has(e)?0:this.parent&&this.parent.has(e,!0)?1:2}get(e,t){const i=this.getOrDefault(e,d.I,t);if(i===d.I)throw new l(e);return i}resolveMetadata(e,t){this.throwIfDisposed();const i=this.getIdentifierLocation(e);switch(i){case 2:return null;case 0:return[this.metadataMap.get(e),i];case 1:if(t){const t=this.parent?.resolveMetadata(e,!0);return t?[t[0],1]:null}return null}}getOrNull(e,t=!0){return this.getOrDefault(e,null,t)}getOrDefault(e,t,i=!0){this.throwIfDisposed();const r=!this.isRetrievingPrivateToken,s={recursive:i,many:!1};if(e===v)return r&&this.visitor.notifyRetrievalVisited(e,{...s,location:0}),this;const n=this.resolveMetadata(e,i);if(null===n)return r&&this.visitor.notifyRetrievalVisited(e,{...s,location:2}),t;const[o,a]=n;if(1===a){if("singleton"===o.scope)return w.getOrDefault(e,t,i);let r;r=null!=o.factory||null!=o.type?d.I:o.value;const n={...o,value:r},a=this.set(n,[...o.dependencies]);this.isRetrievingPrivateToken=!0;const l=this.getOrDefault(a,t,i);return this.isRetrievingPrivateToken=!1,this.visitor.notifyRetrievalVisited(e,{...s,location:1}),l}r&&this.visitor.notifyRetrievalVisited(e,{...s,location:a});let l=o;if("singleton"===o?.scope&&(l=w.metadataMap.get(e)),l&&!0===l.multiple)throw Error(`Cannot resolve multiple values for ${e.toString()} service!`);return l?this.getServiceValue(l):t}getMany(e,t){const i=this.getManyOrDefault(e,d.I,t);if(i===d.I)throw new l(e);return i}getManyOrNull(e,t=!0){return this.getManyOrDefault(e,null,t)}getManyOrDefault(e,t,i=!0){let r;this.throwIfDisposed();let s=2;if(this.multiServiceIds.has(e)?(r=this.multiServiceIds.get(e),r&&(s=0)):i&&this.parent&&this.parent.multiServiceIds.has(e)&&(r=this.parent.multiServiceIds.get(e),s=1),this.visitor.notifyRetrievalVisited(e,{recursive:i,many:!0,location:s}),!r)return t;const n="singleton"===r.scope?w:this;n.isRetrievingPrivateToken=!0;const o=r.tokens.map((e=>n.get(e,n===w?void 0:i)));return n.isRetrievingPrivateToken=!1,o}set(e,t){if(this.throwIfDisposed(),m.includes(e.id))throw Error("Virtual identifiers can not be overridden.");if("singleton"===e.scope&&w!==this)return w.set(e,t);const i=t??e?.dependencies?.map(((t,i)=>(0,f.B)(t,e,i)))??[],r={id:e.id??e.type,type:null,...p.G,...e,dependencies:i};if(this.visitor.notifyNewServiceVisited(r),r.multiple){const e=new a.W(`MultiMaskToken-${r.id}`),t=this.multiServiceIds.get(r.id);t?t.tokens.push(e):this.multiServiceIds.set(r.id,{scope:r.scope,tokens:[e]}),r.id=e,r.multiple=!1}return this.metadataMap.set(r.id,r),r.eager&&"transient"!==r.scope&&this.get(r.id),r.id}setValue(e,t){if("string"!=typeof e&&!(e instanceof a.W))throw Error("The ID passed to setValue must either be a string or a Token.");return this.set({id:e,value:t},[])}remove(e){if(this.throwIfDisposed(),Array.isArray(e))e.forEach((e=>this.remove(e)));else{const t=this.metadataMap.get(e);t&&(this.disposeServiceInstance(t),this.metadataMap.delete(e))}return this}static of(e="default",t=w,i){if("default"===e)return w;let s;const n=i?.conflictDefinition??"rejectAll",a=i?.onConflict??(i?.conflictDefinition?"throw":"returnExisting"),l=i?.onFree??"returnNew";if(o.hasContainer(e)){s=o.getContainer(e);if(!("allowSameParent"===n&&s.parent===t)){if("null"===a)return null;if("throw"===a)throw Error(`${r} ("${String(e)}") already exists.`)}}else{if("null"===l)return null;if("throw"===l)throw Error(`${r} ("${String(e)}) does not already exist.`);s=new g(e,t??void 0),null===t&&w.visitor.notifyOrphanedContainerVisited(s),o.registerContainer(s)}return s}of(e,t){return g.of(e,w,t)}ofChild(e,t){this.throwIfDisposed();const i=g.of(e,this,t);return i&&this.visitor.notifyChildContainerVisited(i),i}reset(e={strategy:"resetValue"}){switch(this.throwIfDisposed(),e.strategy){case"resetValue":this.metadataMap.forEach((e=>this.disposeServiceInstance(e)));break;case"resetServices":this.metadataMap.forEach((e=>this.disposeServiceInstance(e))),this.metadataMap.clear(),this.multiServiceIds.clear();break;default:throw Error("Received invalid reset strategy.")}return this}async dispose(){this.throwIfDisposed(),this.reset({strategy:"resetServices"}),this.disposed=!0,this.visitor.dispose()}throwIfDisposed(){if(this.disposed)throw Error("Cannot use container after it has been disposed.")}getServiceValue(e){let t=d.I;const{factory:i}=e;if(e.value!==d.I)return e.value;if(!i&&!e.type)throw new c.Z(e.id);if(i){const r=e.dependencies.map((e=>({id:this.resolveTypeWrapper(e.typeWrapper),constraints:e.constraints})));if(Array.isArray(i)){const[s,n]=i;t=(this.getOrNull(s)??new s)[n](this,e.id,r)}else t=i(this,e.id,r)}if(!i&&e.type){t=new(0,e.type)(...this.getConstructorParameters(e,!0))}if("transient"!==e.scope&&t!==d.I&&(e.value=t),t===d.I)throw new c.Z(e.id);return t}getConstructorParameters({dependencies:e},t){return e.map((e=>this.resolveResolvable(e,t)))}resolveResolvable(e,t){const i=this.resolveTypeWrapper(e.typeWrapper);if(h.z.includes(i)){if(t)throw new u.m(i.name);return i}if(e.constraints){const{constraints:t}=e;let r;const s=2&t,n=4&t,o=8&t,a=1&t;if(n&&o)throw Error("SkipSelf() and Self() cannot be used at the same time.");if(n&&!this.parent)throw Error("The SkipSelf() flag was enabled, but the subject container does not have a parent.");const c=n?this.parent:this,d=!o??void 0;if(!c.has(i,d)){if(s)return null;throw new l(i)}return r=a?c.getMany(i,d):c.get(i,d),r}return this.get(i)}resolveTypeWrapper(e){const t=e.eagerType??e.lazyType?.();if(null==t)throw Error("The wrapped value could not be resolved.");return t}disposeServiceInstance(e,t=!1){this.throwIfDisposed();if(t||!!e.type||!!e.factory){if("function"==typeof(e?.value).dispose)try{e.value.dispose()}catch(i){}e.value=d.I}}acceptTreeVisitor(e){return this.throwIfDisposed(),this.visitor.addVisitorToCollection(e,this)}detachTreeVisitor(e){return this.throwIfDisposed(),this.visitor.removeVisitorFromCollection(e)}[Symbol.iterator](){return this.metadataMap.entries()}}g.defaultContainer=new g("default");const{defaultContainer:w}=g;o.registerContainer(w)},7500:(e,t,i)=>{i.d(t,{t:()=>a});var r=i(9306),s=i(9265),n=i(4516),o=i(4649);function a(e,t){return i=>{if(null==e||null==i)throw Error("The required configuration was not passed.");let a;const l=Array.isArray(e);if(l?a=e:Array.isArray(t)?a=t:"dependencies"in e&&(a=e.dependencies),!a)throw Error("The dependencies provided were not able to be resolved.");let c={id:i,type:i,...n.G,container:r.L.defaultContainer};l||(c={...c,...e});const d=a.map(((e,t)=>(0,o.B)(e,c,t))),{id:h,container:u}=c;if(u.has(h)&&!c.multiple)throw Error(`@Service() has been called twice upon ${(0,s.H)(i)}, or you have used an ID twice.`);u.set(c,d)}}},5275:(e,t,i)=>{i.d(t,{m:()=>s});var r=i(2440);class s extends r.Z{get message(){return super.message+" If your service requires built-in or unresolvable types, please use a factory."}}},2440:(e,t,i)=>{i.d(t,{Z:()=>s});var r=i(2174);class s extends Error{get message(){return`Cannot instantiate the requested value for the "${this.normalizedIdentifier}" identifier. The related metadata doesn't contain a factory or a type to instantiate.`}constructor(e){super(),this.name="CannotInstantiateValueError",this.normalizedIdentifier="<UNKNOWN_IDENTIFIER>","string"==typeof e?this.normalizedIdentifier=e:e instanceof r.W?this.normalizedIdentifier=`Token<${e.name||"UNSET_NAME"}>`:e&&(e.name||e.prototype?.name)&&(this.normalizedIdentifier=`MaybeConstructable<${e.name??e.prototype.name}>`)}}},4299:(e,t,i)=>{i.d(t,{Fi:()=>r});const r=()=>2},2174:(e,t,i)=>{i.d(t,{W:()=>r});class r{constructor(e){this.name=e}}},9265:(e,t,i)=>{function r(e){return String(e.name||e)}i.d(t,{H:()=>r})},4649:(e,t,i)=>{i.d(t,{B:()=>h});var r=i(5941),s=i(5275),n=i(2440),o=i(9265),a=i(2174);const l=Symbol("LAZY_REFERENCE"),c=Symbol("INJECTED_FACTORY");function d(e){let t;return e&&("string"==typeof e||e instanceof a.W||"function"==typeof e)?t={eagerType:e,lazyType:()=>e,isFactory:!1}:"object"==typeof e&&!0===e[c]?t={eagerType:null,factory:e,isFactory:!0}:e&&function(e){return!0===e[l]}(e)&&(t={eagerType:null,lazyType:()=>e.get(),isFactory:!1}),t}function h(e,t,i){let a,l;if(Array.isArray(e)){const[t,i]=e;if(null==t||null==i)throw Error("The dependency pair was not instantiated correctly.");"number"==typeof i&&(a=i),l=d(t)}else l=d(e);const{eagerType:c}=l;if(null!==c){const e=typeof l;if("function"!==e&&"object"!==e&&"string"!==e)throw new n.Z(`The identifier provided at index ${i} for service ${(0,o.H)(t.type)} is invalid.`);if(null==t.factory&&r.z.includes(c))throw new s.m(c?.name??c)}return{constraints:a,typeWrapper:l}}},9544:(e,t,i)=>{i.d(t,{Z:()=>f});var r=i(1966),s=i(9496),n=i(5924),o=i(306),a=i(4969);const l={details:"details_YVtT",isBrowser:"isBrowser_B1Ku",collapsibleContent:"collapsibleContent_mCB7"};function c(e){return!!e&&("SUMMARY"===e.tagName||c(e.parentElement))}function d(e,t){return!!e&&(e===t||d(e.parentElement,t))}function h(e){let{summary:t,children:i,...h}=e;const u=(0,o.Z)(),p=(0,s.useRef)(null),{collapsed:f,setCollapsed:v}=(0,a.u)({initialState:!h.open}),[y,m]=(0,s.useState)(h.open),g=s.isValidElement(t)?t:s.createElement("summary",null,t??"Details");return s.createElement("details",(0,r.Z)({},h,{ref:p,open:y,"data-collapsed":f,className:(0,n.Z)(l.details,u&&l.isBrowser,h.className),onMouseDown:e=>{c(e.target)&&e.detail>1&&e.preventDefault()},onClick:e=>{e.stopPropagation();const t=e.target;c(t)&&d(t,p.current)&&(e.preventDefault(),f?(v(!1),m(!0)):v(!0))}}),g,s.createElement(a.z,{lazy:!1,collapsed:f,disableSSRStyle:!0,onCollapseTransitionEnd:e=>{v(e),m(!e)}},s.createElement("div",{className:l.collapsibleContent},i)))}const u={details:"details_x2f9"},p="alert alert--info";function f(e){let{...t}=e;return s.createElement(h,(0,r.Z)({},t,{className:(0,n.Z)(p,u.details,t.className)}))}}}]);